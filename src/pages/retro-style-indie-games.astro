---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");

// LỌC ĐÚNG SHAPE – KHÔNG MAP, KHÔNG BIẾN DẠNG
const retroStyleIndiePosts = posts.filter(
  (post) => post.data?.category === "retro-style-indie-games"
);
---

<BaseLayout title="Retro-style Indie Games">
  <main class="container">
    <header class="page-header">
      <h1>Retro-style Indie Games</h1>
      <p>Indie games inspired by classic retro aesthetics and design.</p>
    </header>

    {retroStyleIndiePosts.length === 0 ? (
      <p>No posts yet.</p>
    ) : (
      <section class="post-grid">
        {retroStyleIndiePosts.map((post) => (
          <PostCard post={post} />
        ))}
      </section>
    )}
  </main>
</BaseLayout>
