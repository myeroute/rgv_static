---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import PostCard from '../components/PostCard.astro';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 8);
---

<BaseLayout
  title="Retro Gaming Verse â€“ Slow Play, Deep Experience"
  description="A personal journal about retro games and retro-style indie games."
>
  <div class="home-layout">
    <main class="home-main">
      {posts.map((post) => {
        const slug = post.id.split('/').pop();
        return (
          <PostCard
            title={post.data.title}
            excerpt={post.data.description}
            image={post.data.heroImage}
            url={`/${slug}/`}
          />
        );
      })}
    </main>

    <aside class="home-sidebar">
      <section class="sidebar-box">
        <h3>Search</h3>
        <input type="text" placeholder="Search..." />
      </section>

      <section class="sidebar-box">
        <h3>About</h3>
        <p>
          Retro Gaming Verse is a personal journal about time spent with retro
          games and retro-style indie games, written slowly and thoughtfully.
        </p>
      </section>
    </aside>
  </div>
</BaseLayout>

<style>
  .home-layout {
    max-width: 1100px;
    margin: 0 auto;
    padding: 2.5rem 1rem;
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 3rem;
  }

  .sidebar-box {
    border: 1px solid #eee;
    border-radius: 6px;
    padding: 1.5rem;
    margin-bottom: 2rem;
  }

  .sidebar-box h3 {
    margin-top: 0;
    font-size: 1rem;
  }

  .sidebar-box p {
    font-size: 0.95rem;
    color: #666;
  }

  .sidebar-box input {
    width: 100%;
    padding: 0.5rem 0.6rem;
    font-size: 0.9rem;
  }
</style>
