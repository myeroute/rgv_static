---
import { getCollection } from "astro:content";
import PostCard from "../components/PostCard.astro";
import BaseLayout from "../layouts/BaseLayout.astro";

const PAGE_SIZE = 8;

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const latestPosts = posts.slice(0, PAGE_SIZE);
---

<BaseLayout sidebar="home">
  <!-- ðŸ”´ Homepage context wrapper -->
  <div class="page-home">
    <section class="home-post-list">
      {latestPosts.map((post) => (
        <PostCard post={post} />
      ))}
    </section>

    <nav class="pagination">
      <a href="/page/2/">Next â†’</a>
    </nav>
  </div>
</BaseLayout>
