---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";

const posts = await getCollection("blog");

const filteredPosts = posts
  .filter((post) => post.data?.category === "retro-games")
  .sort((a, b) => {
    const da = a.data.pubDate ? new Date(a.data.pubDate).getTime() : 0;
    const db = b.data.pubDate ? new Date(b.data.pubDate).getTime() : 0;
    return db - da;
  });
---

<BaseLayout>
  <main class="category-page">
    <header class="category-header">
      <h1>Retro Games</h1>
    </header>

    <section class="post-list">
      {filteredPosts.map((post) => (
        <PostCard post={post} />
      ))}
    </section>
  </main>
</BaseLayout>

<style>
.category-page {
  max-width: 920px;
  margin: 0 auto;
  padding: 32px 16px;
}

.category-header {
  margin-bottom: 32px;
}

.category-header h1 {
  font-size: 2rem;
  font-weight: 600;
}
</style>
