---
const { post } = Astro.props;

if (!post?.slug) {
  throw new Error("PostCard: missing slug");
}

const { title, description, heroImage } = post.data;
const hasImage = Boolean(heroImage);
---

<article class={`post-card ${hasImage ? "has-image" : ""}`}>
  {hasImage && (
    <a href={`/${post.slug}/`} class="post-thumb">
      <img
        src={heroImage.src}
        alt={title}
        loading="lazy"
      />
    </a>
  )}

  <div class="post-content">
    <h2 class="post-title">
      <a href={`/${post.slug}/`}>{title}</a>
    </h2>

    {description && (
      <p class="post-excerpt">{description}</p>
    )}

    <a class="read-more" href={`/${post.slug}/`}>
      Read More â†’
    </a>
  </div>
</article>

<style>
.post-card {
  margin-bottom: 3rem;
}

.post-card.has-image {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: 1.5rem;
  align-items: start;
}

.post-thumb img {
  width: 100%;
  height: auto;
  display: block;
}

.post-title {
  margin: 0 0 0.5rem;
}

.post-title a {
  color: #000;
  text-decoration: none;
}

.post-excerpt {
  margin: 0 0 0.75rem;
}
</style>
