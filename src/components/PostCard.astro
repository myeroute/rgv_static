---
import { Image } from 'astro:assets';

const { post } = Astro.props;

if (!post?.slug) {
  throw new Error('PostCard: missing post.slug');
}

const {
  title,
  description,
  heroImage,
} = post.data;
---

<article class="post-card">
  {heroImage && (
    <a href={`/${post.slug}/`} class="thumb">
      <Image
        src={heroImage}
        alt={title}
        width={800}
        height={450}
        format="webp"
        loading="lazy"
      />
    </a>
  )}

  <div class="content">
    <h2 class="title">
      <a href={`/${post.slug}/`}>{title}</a>
    </h2>

    {description && (
      <p class="excerpt">{description}</p>
    )}

    <a class="read-more" href={`/${post.slug}/`}>
      Read More â†’
    </a>
  </div>
</article>

<style>
.post-card {
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 2rem;
  align-items: start;
}

.thumb img {
  width: 100%;
  height: auto;
  border-radius: 8px;
  display: block;
}

.title {
  margin: 0 0 0.5rem;
}

.title a {
  color: inherit;
  text-decoration: none;
}

.excerpt {
  margin: 0 0 1rem;
  line-height: 1.6;
}

.read-more {
  font-weight: 500;
}

@media (max-width: 768px) {
  .post-card {
    grid-template-columns: 1fr;
  }
}
</style>
