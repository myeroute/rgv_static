---
const { post } = Astro.props;

// üõë HARD GUARD ‚Äì n·∫øu kh√¥ng c√≥ post th√¨ render r·ªóng
if (!post) {
  return null;
}

// ‚úÖ SAFE SLUG ‚Äì ho·∫°t ƒë·ªông cho:
// - root posts
// - folder posts (retro-games/xxx.md)
// - m·ªçi collection
const slug =
  post.slug ??
  post.id?.split("/").pop();

if (!slug) {
  return null;
}
---

<article class="post-card">
  <a href={`/${slug}/`} class="post-card-link">
    {post.data?.heroImage && (
      <img
        src={post.data.heroImage}
        alt={post.data.title}
        class="post-card-image"
        loading="lazy"
      />
    )}

    <div class="post-card-content">
      <h2 class="post-card-title">
        {post.data.title}
      </h2>

      {post.data?.description && (
        <p class="post-card-excerpt">
          {post.data.description}
        </p>
      )}

      <span class="post-card-readmore">
        Read More
      </span>
    </div>
  </a>
</article>

<style>
.post-card {
  margin-bottom: 2.5rem;
}

.post-card-link {
  display: block;
  text-decoration: none;
  color: inherit;
}

.post-card-image {
  width: 100%;
  height: auto;
  border-radius: 12px;
  margin-bottom: 1rem;
}

.post-card-title {
  font-size: 1.6rem;
  line-height: 1.3;
  margin: 0 0 0.5rem;
}

.post-card-excerpt {
  color: #555;
  margin-bottom: 0.75rem;
}

.post-card-readmore {
  display: inline-block;
  margin-top: 0.5rem;
  padding: 0.4rem 0.9rem;
  background: #6c63ff;
  color: #fff;
  border-radius: 6px;
  font-size: 0.9rem;
}
</style>
