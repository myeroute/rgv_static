---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
---

<BaseLayout
  title={post.data.title}
  description={post.data.description}
  sidebar="post"
  post={post}
>
  <article class="post">
    <header class="post-header">
      <p class="post-author">Steven</p>
      <h1>{post.data.title}</h1>

      {post.data.heroImage && (
        <img
          src={post.data.heroImage}
          alt={post.data.title}
          class="post-hero"
        />
      )}

      {post.data.description && (
        <p class="post-excerpt">{post.data.description}</p>
      )}
    </header>

    <div class="post-content">
      <post.Content />
    </div>
  </article>
</BaseLayout>

<style>
.post {
  max-width: 720px;
}

.post-header h1 {
  font-size: 2.6rem;
  line-height: 1.2;
  margin-bottom: 1rem;
}

.post-author {
  font-size: 0.9rem;
  color: #666;
  margin-bottom: 0.75rem;
}

.post-hero {
  width: 100%;
  border-radius: 12px;
  margin: 2rem 0;
}

.post-excerpt {
  font-size: 1.05rem;
  color: #555;
}

.post-content {
  margin-top: 3rem;
  line-height: 1.8;
}
</style>
